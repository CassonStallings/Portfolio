(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[152,7,117,124],{1128:function(e,t,a){"use strict";a.r(t);var i=a(9),h=a.n(i),i=a(877),m=a.n(i),i=a(1),s=a.n(i);t.default=class{constructor(e,t,a,i,s,o,r,n){this.title=this.sanitizeTitle(e,t),this.shouldUseDisplayPath=n||!1,this.adZone=this.buildAdZone(),this.adTag=this.buildAdURL(a,i,s,o,r)}getParameterByName(e){let t=e;e=window.location.href;t=t.replace(/[[\]]/g,"\\$&");e=new RegExp(`[?&]${t}(=([^&#]*)|&|#|$)`).exec(e);return e?e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):"":null}buildAdURL(e,t,a,i,s){var o=this.getParameterByName("adzone"),r=this.getParameterByName("cms"),n=this.getParameterByName("cid")||"0";let l=`video_tags%3D__item-tags__%26vport%3D${this.getViewport()}%26video_id%3D__item-mediaid__`;if(h.a&&(o&&(this.adZone="/4160/mv.fc/"+o),r&&(l=l+"%26cms%3D"+r),n)&&(l=l+"%26CID%3D"+n),l=e?l+"%26adslot%3D"+e:l+"%26adslot%3Dpreroll_"+this.title,t?(o=t.split(" ")[0],r=m()(o)?Number(o):o,l=l+"%26artLength%3D"+r):l+="%26artLength%3DNA",a&&(l=l+"%26pos%3D"+a),i&&(l+="%26firstimp%3Dtrue"),window.top.moatPrebidApi){var d=window.top.moatPrebidApi.getMoatTargetingForPage();let e="";for(const c in d)e+=`${c}=${d[c]}&`;(e=e.split("")).pop(),e=e.join(""),e=encodeURIComponent(e),l=l+"%26"+e}if(window.localStorage){n=window.localStorage.getItem("bcDFPTargetingParams");if(n){e=JSON.parse(n);const p=[];e.forEach(e=>p.push(e.key+"%3D"+e.value)),p.length&&(l=l+"%26"+p.join("%26"))}}if(window.googletag&&(t=window.googletag.pubads().getTargeting("bmb")).length&&(l=l+"%26bmb%3d"+t.join(",")),l+=`%26chn=${null==(o=window)||null==(o=o.digitalData)||null==(o=o.ads)||null==(o=o.targeting)||null==(o=o.chn)?void 0:o[0]}%26schn=${null==(r=window)||null==(r=r.digitalData)||null==(r=r.ads)||null==(r=r.targeting)||null==(r=r.schn)?void 0:r[0]}%26tags=`+(null==(a=window)||null==(a=a.digitalData)||null==(a=a.ads)||null==(a=a.targeting)||null==(a=a.tags)?void 0:a[0]),"object"==typeof s&&0<Object.keys(s).length&&!1!==s){let e="";for(const u in s)e+=`${u}=${s[u]}&`;(e=e.split("")).pop(),e=e.join(""),e=encodeURIComponent(e),l=l+"%26"+e}return`//pubads.g.doubleclick.net/gampad/ads?sz=640x360&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&vad_type=linear&vpos=preroll&cms=${this.constructCMSHash()}&iu=${this.adZone}&cust_params=`+l}constructCMSHash(){var e=this.getParameterByName("cms");if(e)return e;var t,a=document.location.href;let i=0,s;if(a&&0!==a.length){for(s=0;s<a.length;s++)t=a.charCodeAt(s),i=(i<<5)-i+t,i&=i;i=(i=Math.abs(i)).toString(36)}return i}sanitizeTitle(e,t){if(t)return t;switch(!0){case null!==e.match(/Homepage/):return"homepage";case null!==e.match(/Infinite/):return"infinitescroll";default:return"homepage"}}buildAdZone(){let e="/4160/mv.fc";return e=this.shouldUseDisplayPath?(s()(window.digitalData,"ads.adPath")||e)+"/preroll_"+this.title:e+"/__item-category__/__item-series__/preroll_"+this.title}getViewport(){var e;return h.a?1023<(e=window.innerWidth)?"l":e<640?"s":"m":"undefined"}}},1145:function(e,t,a){"use strict";a.r(t);var i=a(0),v=a.n(i),s=a(2),s=a.n(s),o=a(1),y=a.n(o),o=a(39),f=a.n(o),w=a(1154),_=a(141),P=a(46),r=a(9),o=a(873),n=a.n(o),o=a(51),l=a.n(o),d=a(1128),c=a(6);let p=!1,u=!1;r.canUseDOM&&(p=a(113),u=a(874));class k extends i.Component{constructor(){super(),this.generatePreRoll=this.generatePreRoll.bind(this),this.setMoatTracking=this.setMoatTracking.bind(this),this.onReady=this.onReady.bind(this),this.onVideoLoad=this.onVideoLoad.bind(this),this.trackMoatVideoProgress=this.trackMoatVideoProgress.bind(this),this.state={videoTitle:"",firstimp:!1,adDataForMoat:null,calledMoatEventTrackerMarker:{}},this.videoContainerRef=v.a.createRef(),this.MoatApiReference=null,this.adPosition=0,this.lastKnownPlaybackPosition=0,this.lastSystemClock=0,this.mediaInfo={},this.customVideoMetadata={},this.sessionStarted=!1,this.playSent=!1,this.adsPlaying=!1}componentDidMount(){p&&p(["https://z.moatads.com/jwplayerplugin0938452/moatplugin.js"])}componentWillUnmount(){r.canUseDOM&&(window.moatjw&&window.moatjw.removeAll(),u)&&(u.off("idle"),u.off("wakeup"))}onVideoLoad(e){this.setState({videoTitle:y()(e,"item.title")})}onReady(){var e=this.props["playerid"];const i=window.jwplayer(e);e=i.getMute()?1:0;(this.player=i).setCurrentCaptions(e),i.on("playlistItem",()=>{var e=this.props["config"];this.customVideoMetadata={playerDimensions:i.getContainer().offsetWidth+"x"+i.getContainer().offsetHeight,abgroup:y()(e,"abgroup","null")},this.lastKnownPlaybackPosition=0,this.lastSystemClock=0,this.playSent=!1}),i.on("beforePlay",()=>{0!==i.getPosition()||this.sessionStarted||(this.sessionStarted=!0)}),i.on("firstFrame",()=>{this.playSent||(this.PlaySent=!0)}),i.on("time",e=>{var t=new Date,t=(this.lastSystemClock=t.getTime(),this.lastKnownPlaybackPosition=e.position,Math.floor(100*e.position/e.duration)),a={};switch(t){case 1:this.state.calledMoatEventTrackerMarker.AdVideoStart||(this.trackMoatVideoProgress("AdVideoStart",i,e),a.AdVideoStart=!0,this.setState({calledMoatEventTrackerMarker:a}));break;case 25:this.state.calledMoatEventTrackerMarker.AdVideoFirstQuartile||(this.trackMoatVideoProgress("AdVideoFirstQuartile",i,e),a.AdVideoFirstQuartile=!0,this.setState({calledMoatEventTrackerMarker:a}));break;case 50:this.state.calledMoatEventTrackerMarker.AdVideoMidpoint||(this.trackMoatVideoProgress("AdVideoMidpoint",i,e),a.AdVideoMidpoint=!0,this.setState({calledMoatEventTrackerMarker:a}));break;case 75:this.state.calledMoatEventTrackerMarker.AdVideoThirdQuartile||(this.trackMoatVideoProgress("AdVideoThirdQuartile",i,e),a.AdVideoThirdQuartile=!0,this.setState({calledMoatEventTrackerMarker:a}));break;case 99:this.state.calledMoatEventTrackerMarker.AdVideoComplete||(this.trackMoatVideoProgress("AdVideoComplete",i,e),a.AdVideoComplete=!0,this.setState({calledMoatEventTrackerMarker:a}))}}),i.on("adTime",e=>{var t=new Date;this.lastSystemClock=t.getTime(),this.lastKnownPlaybackPosition=e.position}),i.on("seek",()=>{}),i.on("seeked",()=>{this.lastKnownPlaybackPosition=i.getPosition()}),i.on("pause",e=>{this.trackMoatVideoProgress("AdPaused",i,e)}),i.on("play",e=>{this.adsPlaying&&(this.adsPlaying=!1),this.trackMoatVideoProgress("AdPlaying",i,e)}),i.on("complete",()=>{this.adsPlaying&&(this.adsPlaying=!1),this.resetSession(),this.setState({firstimp:!1})}),i.on("buffer",()=>{}),i.on("bufferFull",()=>{}),i.on("error",()=>{this.resetSession()}),i.on("setupError",()=>{this.resetSession()}),i.on("adImpression",e=>{var t=y()(e,"adtitle","unknown-title"),a=y()(e,"ima.ad.g.adWrapperCreativeIds[0]","unknown-wrapper-creative-id"),i=y()(e,"ima.ad.g.adWrapperIds[0]","unknown-wrapper-id"),e=y()(e,"ima.ad.g.creativeId","unknown-creative-id");this.adStartBreak(t+` | ${a} | ${i} | `+e,this.adPosition,this.lastKnownPlaybackPosition),this.playSent||(this.playSent=!0),this.adsPlaying=!0}),i.on("adPlay",()=>{this.playSent||(this.playSent=!0)}),i.on("adStarted",()=>{}),i.on("adSkipped",()=>{this.adsPlaying=!1}),i.on("adComplete",()=>{}),i.on("adBreakEnd",()=>{this.adsPlaying&&(this.adsPlaying=!1)}),i.on("remove",()=>{this.sessionStarted&&this.resetSession()}),this.setMoatTracking(i)}setMoatTracking(t){r.canUseDOM&&window.moatjw&&t.on("adImpression",e=>{window.moatjw.add({partnerCode:"mansuetojwint127635890115",player:t,adImpressionEvent:e})})}resetSession(){this.sessionStarted=!1,this.playSent=!1}adStartBreak(){this.adsPlaying?this.adPosition=this.adPosition+1:(this.adsPlaying=!0,this.adPosition=0)}trackMoatVideoProgress(e,t,a){this.MoatApiReference||(this.MoatApiReference=window.initMoatTracking(this.videoContainerRef.current,this.state.adDataForMoat,a.duration,"mansuetojwcontent613342534978",null)),this.MoatApiReference.dispatchEvent({type:e,adVolume:t.getMute()?0:(t.getVolume()/100).toFixed(1)})}generatePreRoll(){var{data:e,type:t,pos:a,readTime:i}=this.props,s=y()(this.props,"customparams",!1);return l.a.get("dailycookie")||this.state.alreadySawFirstImpression||this.setState({firstimp:!0,alreadySawFirstImpression:!0}),new d.default(y()(e,"title"),t,"preroll_rightrail",i,a,this.state.firstimp,s).adTag}render(){var{playerid:e,playlistId:t}=this.props;return v.a.createElement("div",{className:"siderail-video-module"},v.a.createElement("div",{className:"module__title"},this.props.slugName),v.a.createElement("div",{className:"siderail-video-module__player-container",ref:this.videoContainerRef},v.a.createElement(n.a,{playerId:e,customProps:{sharing:{link:"https://www.fastcompany.com/videos"}},playerScript:`https://content.jwplatform.com/libraries/${e}.js`,playlist:`//content.jwplatform.com/feeds/${t}.json?page_limit=10`,generatePrerollUrl:this.generatePreRoll,onReady:this.onReady,onVideoLoad:this.onVideoLoad,onError:e=>{c.a.error("Siderail ReactJW Video Player Error",y()(e,"message"))},onSetupError:e=>{c.a.error("Siderail ReactJW Video Player Error",y()(e,"message"))},playInView:!0,isMuted:!0,isAutoPlay:!1,playInViewPercentage:100,aspectRatio:"16:9",useMultiplePlayerScripts:!0})),v.a.createElement("h3",{className:"card__title card__title--small siderail-video-module__player-title-slug"},this.state.videoTitle))}}k.defaultProps={data:{},config:{},slugName:"Featured Video",readTime:null},k.propTypes={data:s.a.shape({}),playerid:s.a.string.isRequired,playlistId:s.a.string.isRequired,slugName:s.a.string,type:s.a.string.isRequired,pos:s.a.string.isRequired,readTime:s.a.string,config:s.a.shape({})};var b=a(1160),M=a(1161),E=a(473),S=a(242),o=v.a.memo(({post:t,fullPageAdvertorial:a,isVideoPost:i,config:s,posts:e,isFirstPost:o,related:r,isLongPost:n,totalAdCount:l})=>{l=n&&!i?l:1;const d=y()(t,"tags");var c=Object(P.isPremium)(d),p=y()(t,"posterVideo.feedId"),e=1<y()(e,"length");const u=y()(t,"readTime"),h=Object(b.a)(y()(t,"categories",[]),"recommender")||Object(b.a)(y()(t,"categories",[]),"magazine");var m=!!d.find(e=>["davos-dialogues","cybersecurity","mindfulness-at-work","_advertorial_mic_summit","financing-the-future"].includes(e.slug)),p=o&&!p&&!i&&!Object(P.isAdvertorial)(d)&&!e&&!m,e=()=>v.a.createElement(v.a.Fragment,null,v.a.createElement("div",{key:"sidebar-nonsticky-"+(null==t?void 0:t.id),className:"post__promotion post__promotion--non-sticky"},v.a.createElement(E.default,{type:"rail_sticky",page:o?1:2})),v.a.createElement("div",{className:"post__promotion",key:`post-ad-${null==t?void 0:t.id}-1`,id:`post-ad-${null==t?void 0:t.id}-1`},v.a.createElement("div",{className:"post__promotion__inner--sticky"},v.a.createElement("div",{className:"post__relative",key:"sidebar-video-"+(null==t?void 0:t.id)},v.a.createElement(k,{config:s,type:"rightrail",playerid:"2fyG0pBE",playlistId:h?"9JiEM2iD":"dOytm2y2",pos:"newmultiplayer",readTime:u,customparams:Object(M.a)(t)})),v.a.createElement(E.default,{type:"rail_sticky",page:o?1:2}))));const g=({index:e=0})=>v.a.createElement("div",{key:`GenericSidebar-${null==t?void 0:t.id}-`+e,id:`post-ad-${null==t?void 0:t.id}-`+e,className:Object(S.a)("post__promotion",{"post__promotion--video":i,"post__promotion--advertorial":a})},v.a.createElement("div",{className:"post__promotion__inner--sticky"},v.a.createElement(E.default,{type:"rail_sticky",page:o?1:2}),0!==e||!n||i||d.map(e=>e.name).includes("*oracle_advertorial")||!Object(P.isCustom)(d)&&!Object(P.isAdvertorial)(d)?null:v.a.createElement("div",{className:"post__relative"},v.a.createElement(w.default,{config:s,stories:r.map(e=>f()(e,{assetSizes:_.f.column})),fullPageAdvertorial:a}))));return c?null:v.a.createElement("div",{className:Object(S.a)("post__sidebar",{"post__sidebar--video":i})},p?v.a.createElement(e,null):[...Array(l)].map((e,t)=>v.a.createElement(g,{index:t})))},(e,t)=>{return(null==e||null==(e=e.post)?void 0:e.id)===(null==t||null==(e=t.post)?void 0:e.id)});o.defaultProps={related:[],fullPageAdvertorial:!1,isVideoPost:!1,isLongPost:!1,posts:[],totalAdCount:2},o.propTypes={config:s.a.shape({}).isRequired,post:s.a.shape({}).isRequired,isFirstPost:s.a.bool.isRequired,related:s.a.arrayOf(s.a.shape({})),fullPageAdvertorial:s.a.bool,isLongPost:s.a.bool,isVideoPost:s.a.bool,posts:s.a.arrayOf(s.a.shape({})),totalAdCount:s.a.number},t.default=o},1154:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return s});var t=a(0),c=a.n(t),t=a(2),t=a.n(t),i=a(1),p=a.n(i),u=a(1124),h=a(62),m=a(243);function s(e){if(!e)return null;const{config:a,stories:t,fullPageAdvertorial:i,slug:s,slugClassName:o,tiled:r,hideOnMobile:n,horizontal:l,reverse:d}=e;e=p()(t,"[0].categories[0].slug")||p()(t,"[1].categories[0].slug")||"";return t&&p()(t,"length")<2?null:c.a.createElement("div",{className:"related-posts"+(n?" hide-on-mobile":"")+(r?" tiled":"")},c.a.createElement(h.default,{slugName:s,className:"column "+o,linkTo:"/"+e}),c.a.createElement("div",{className:"cards"},t.map((e,t)=>c.a.createElement(u.default,{horizontal:l,reverse:d,config:a,type:"small",metadata:e,key:e.id,fullPageAdvertorial:i,noBottomBorder:r,vertical:!0,noBorder:!0,cardEvent:()=>{var e=t;e+=1,Object(m.b)({eventCategory:"related",eventAction:"clicked",eventLabel:"algorithm=fc-custom,location=right-rail,position="+e})}}))))}s.defaultProps={fullPageAdvertorial:!1,slug:"Related Stories",slugClassName:null,tiled:!1,hideOnMobile:!1,horizontal:!1,reverse:!1},s.propTypes={config:t.a.shape({}).isRequired,stories:t.a.arrayOf(t.a.shape({})).isRequired,fullPageAdvertorial:t.a.bool,slug:t.a.string,slugClassName:t.a.string,tiled:t.a.bool,hideOnMobile:t.a.bool,horizontal:t.a.bool,reverse:t.a.bool}},1160:function(e,t,a){"use strict";a.d(t,"a",function(){return i});a(881);function i(e,t){let a=0;for(;a<e.length;){if(e[a].slug===t)return!0;a+=1}return!1}},1161:function(e,t,a){"use strict";t.a=function(e){var{tags:e,categories:t,slug:a}=e;const i=[],s=[];a=a.split("-");return e.forEach(e=>{i.push(e.slug)}),a.forEach(e=>{i.push(e)}),t.forEach(e=>{s.push(e.slug)}),{cat:s.toString(),tags:i.toString()}}},473:function(e,t,a){"use strict";a.r(t);var i=a(2),i=a.n(i),s=a(0),o=a.n(s),a=a(40);class r extends s.Component{constructor(e){super(e);var e=this.props["type"],t=Math.floor(1e10*Math.random()),e=this.props.adContainerId||e+"_"+t;this.state={adContainerId:e}}componentDidMount(){window&&window._ash&&window._ash.push({type:"onComponentDidMount",data:{props:this.props,state:this.state}})}shouldComponentUpdate(e){e=e.type;return"adhesive"===e}constructAdClass(e){return"ad-wrapper ad-wrapper--"+e}adLabel(){var e=this.props["type"];return["hero","break","rail","rail_sticky","in_content","footer"].includes(e)?o.a.createElement("div",{className:"ad-wrapper__ad-slug"},"advertisement"):null}render(){var{type:e,page:t=1}=this.props,a=this.state["adContainerId"];let i=(`ad-wrapper--ad-unit-wrap ${this.props.region||""} `+(this.props.hide?"hide":"show")).trim();var s=(`adElement camp-${e} `+(this.props.adClassName||"")).trim();return e.includes("native")&&(i="ad-unit-wrap-native"),o.a.createElement("div",{className:i},this.adLabel(),o.a.createElement("div",{className:this.constructAdClass(e)},o.a.createElement("div",{id:a,className:s,"data-ad_slot_type":e,"data-page":t})))}}r.propTypes={adContainerId:i.a.string,adClassName:i.a.string,location:i.a.object,page:i.a.number,region:i.a.string,type:i.a.string,hide:i.a.bool};t.default=Object(a.b)(e=>({location:e.routing.location}))(r)}}]);
//# sourceMappingURL=post-content-sidebar.1c7f948d1a014e42e57e.js.map