(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[95,7],{473:function(e,t,r){"use strict";r.r(t);var a=r(2),a=r.n(a),i=r(0),o=r.n(i),r=r(40);class n extends i.Component{constructor(e){super(e);var e=this.props["type"],t=Math.floor(1e10*Math.random()),e=this.props.adContainerId||e+"_"+t;this.state={adContainerId:e}}componentDidMount(){window&&window._ash&&window._ash.push({type:"onComponentDidMount",data:{props:this.props,state:this.state}})}shouldComponentUpdate(e){e=e.type;return"adhesive"===e}constructAdClass(e){return"ad-wrapper ad-wrapper--"+e}adLabel(){var e=this.props["type"];return["hero","break","rail","rail_sticky","in_content","footer"].includes(e)?o.a.createElement("div",{className:"ad-wrapper__ad-slug"},"advertisement"):null}render(){var{type:e,page:t=1}=this.props,r=this.state["adContainerId"];let a=(`ad-wrapper--ad-unit-wrap ${this.props.region||""} `+(this.props.hide?"hide":"show")).trim();var i=(`adElement camp-${e} `+(this.props.adClassName||"")).trim();return e.includes("native")&&(a="ad-unit-wrap-native"),o.a.createElement("div",{className:a},this.adLabel(),o.a.createElement("div",{className:this.constructAdClass(e)},o.a.createElement("div",{id:r,className:i,"data-ad_slot_type":e,"data-page":t})))}}n.propTypes={adContainerId:a.a.string,adClassName:a.a.string,location:a.a.object,page:a.a.number,region:a.a.string,type:a.a.string,hide:a.a.bool};t.default=Object(r.b)(e=>({location:e.routing.location}))(n)},474:function(e,t,r){"use strict";r.r(t);var a=r(0),b=r.n(a),i=r(2),i=r.n(i),o=r(871),v=r.n(o),o=r(875),n=r.n(o),o=r(870),l=r.n(o),o=r(479),s=r.n(o),o=r(23),d=r.n(o),S=r(1124),p=r(62),c=r(1119),u=r(1126),h=r(141),E=r(243),f=r(46),y=r(473);function m(t,e){var r,a=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,r)),a}function g(a){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?m(Object(i),!0).forEach(function(e){var t,r;t=a,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):m(Object(i)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(i,e))})}return a}function _(){}class w extends a.Component{constructor(e){super(e),this.renderMoreButton=this.renderMoreButton.bind(this),this.enableInfiniteScroll=this.enableInfiniteScroll.bind(this),this.handleScroll=s()(this.handleScroll.bind(this),1e3)}componentDidMount(){this.isDesktop=Object(u.a)()}componentWillUnmount(){this.removeInfiniteScrollEvent()}onlyUnique(e,t,r){return r.indexOf(e)===t}getAllStories(){var e,t=this.props.stories.map((e,t)=>g(g({},e),{},{site:"Fast Company",assetSizes:0===t?h.f.bigFirstMobile:h.f[3],allowNoImage:!0,excerpt:d()(e.excerpt||"")}));return!(this.props.allRendered||this.props.paginationEnabled||this.props.infiniteScrollEnabled)&&10<=(null==(e=this.props)||null==(e=e.stories)?void 0:e.length)?t.slice(0,10):t}getSections(){return n()(this.getAllStories(),10).map((e,t)=>({id:"section-"+(t+1),stories:e}))}addInfiniteScrollEvent(){window.addEventListener("scroll",this.handleScroll)}removeInfiniteScrollEvent(){window.removeEventListener("scroll",this.handleScroll)}enableInfiniteScroll(e){e.preventDefault(),this.infiniteScrollInitialized=!0,this.props.hideRecircFeed(),this.props.infiniteScrollAllFeedFetch({page:this.props.page+1,slug:this.props.section,excludeFromHomepage:!0},this.props.config).then(()=>{this.addInfiniteScrollEvent()})}handleScroll(){if(!this.props.infiniteScrollLoading){if(this.props.totalPages<this.props.page)return this.removeInfiniteScrollEvent();if(window.innerHeight+window.scrollY>=document.body.offsetHeight-3e3)return this.removeInfiniteScrollEvent(),this.props.infiniteScrollAllFeedFetch({page:this.props.page+1,slug:this.props.section,excludeFromHomepage:!0},this.props.config).then(()=>{this.props.totalPages>this.props.page&&this.addInfiniteScrollEvent()})}return!1}renderMoreButton(e,t,r,a,i){if(this.props.disableMore)return null;if(this.props.infiniteScrollEnabled){if(this.infiniteScrollInitialized)return null;if(1===this.props.totalPages||this.props.infiniteScrollLoading&&!r)return null;if(r){var o=this.props.page+1;let e="";switch(this.props.type){case"homepage":e="/all/"+o;break;case"brandworks":e=`/fcw/${this.props.section}/`+[o];break;default:e=`/${this.props.type}/${this.props.section}/`+o}return this.props.hrefOverride&&(e=""+this.props.hrefOverride+o),b.a.createElement("a",{title:`See More ${this.props.section} on page `+this.props.page,href:e,className:"all-feed__more"},b.a.createElement("button",{onClick:this.enableInfiniteScroll},"See More Stories"))}}if(this.props.paginationEnabled){if(a||!r)return null;{var n=this.props["page"];let e="";switch(this.props.type){case"homepage":e="/all/"+n;break;case"brandworks":e=`/fcw/${this.props.section}/`+[n];break;case"fceb":e="/section/fast-company-executive-board/"+n;break;default:e=`/${this.props.type}/${this.props.section}/`+n}return"/section//2"===(e=this.props.hrefOverride?""+this.props.hrefOverride+n:e)&&(e="/section/innovation-by-design-2019/2"),b.a.createElement("div",{className:`all-feed__button all-feed__button--${(null==i?void 0:i.site)||""} `+(this.props.mobileSeeMoreHidden?"all-feed__button--mobile-hidden":"")},b.a.createElement(c.default,{title:`See More ${this.props.section} on page `+(this.props.page+1),to:e,config:i},b.a.createElement("button",null,"See More Stories")))}}return 1!==e||this.props.allRendered||this.props.disableMore?null:b.a.createElement("div",{className:`all-feed__button all-feed__button--${(null==i?void 0:i.site)||""} `+(this.props.mobileSeeMoreHidden?"all-feed__button--mobile-hidden":"")},b.a.createElement("button",{onClick:this.props.setAllLoadedState},"See More Stories"))}renderMobileAd(e){return 1===e?null:b.a.createElement("div",{className:"all-feed__mobile-ad-container"},b.a.createElement(y.default,{type:"break"}))}renderSlugOrName(e){if(!e||!e.hasSlug)return null;var t;if(e.authorPage)return l()(e.author)?"":b.a.createElement("h2",{className:"author-page__all-feed-title"},"Stories by "+((null==(t=e.author)?void 0:t.name)||""),b.a.createElement("span",{className:"author-page__all-feed-title-rss"},b.a.createElement("a",{href:`/user/${null==(t=e.author)?void 0:t.slug}/rss`},"RSS")));if(!l()(e.advertorialSlugs))return t=null==(t=e.advertorialSlugs)?void 0:t.name,t=Object(f.getBrandworksName)([{name:t}]),b.a.createElement(p.default,{slugName:e.allStoriesTitle?`ALL ${t} STORIES`:null==(t=e.advertorialSlugs)?void 0:t.name,className:"tag-page",advertorial:!0});let r={};return-1<e.titleOverride.indexOf("Magazine")&&(r={name:"See Archives",url:"/magazine/archive"}),b.a.createElement(p.default,{linkTo:"//www.fastcompany.com",slugName:(null==e?void 0:e.titleOverride)||"All Stories",archives:r})}render(){const{config:a,advertorialSlugs:e,authorPage:t,author:r,hasSlug:i,titleOverride:o,isLastPage:n,type:l,allStoriesTitle:s,brandworksSlug:d,featuredTop:p,bottomLine:c,noAds:u}=this.props;let h=this.props["modifier"];const f="advertorial"===(h=h||i?h:"no-slug"),m=this.props.stories.length;let g=`all-feed__wrapper ${h?"all-feed__wrapper--"+h:""} ${u?"centered":""}
    `;return"user"===l&&(g+=` all-feed__wrapper--${l} `),b.a.createElement("section",{className:"all-feed "+(c?"":"no-bottom-line")},this.renderSlugOrName({advertorialSlugs:e,authorPage:t,author:r,hasSlug:i,titleOverride:o,allStoriesTitle:s}),b.a.createElement("div",{className:g},this.getSections().map((e,r)=>{var t=this.getSections().length===r+1;return b.a.createElement("div",{key:e.id,className:"all-feed__section"},b.a.createElement("div",{className:"all-feed__posts"},e.stories.filter(this.onlyUnique).map((e,t)=>(d&&(e.customEyebrowText=d,e.fullyReplaceEyebrow=!0),b.a.createElement(S.default,{type:"all-feed",key:e.id||e.mediaid,metadata:e,config:a,hasExcerpt:"long"===e.layout,fullPageAdvertorial:f,top:p&&0===r&&0===t,cardEvent:()=>{Object(E.b)({eventCategory:"Engagement",eventAction:"AllFeed:Pos-"+(t+1),eventLabel:e.link})}}))),!u&&this.renderMobileAd(r),this.renderMoreButton(r,m,t,n,a)),!u&&b.a.createElement(b.a.Fragment,null,b.a.createElement("div",{className:"all-feed__sidebar"},b.a.createElement("div",{className:"all-feed__promotion",id:"sidebar-ad-"+r},b.a.createElement(v.a,{top:100,bottomBoundary:"#sidebar-ad-"+r,enabled:this.isDesktop},b.a.createElement(y.default,{type:"rail_sticky"}))))))})))}}w.defaultProps={stories:[],allRendered:!1,modifier:"",mobileSeeMoreHidden:!1,advertorialSlugs:{},authorPage:!1,author:{},hasSlug:!0,disableMore:!1,titleOverride:"",paginationEnabled:!1,totalPages:0,page:0,section:"",type:"",isLastPage:!1,infiniteScrollEnabled:!1,infiniteScrollAllFeedFetch:_,hideRecircFeed:_,setAllLoadedState:_,infiniteScrollLoading:!1,hrefOverride:"",mobileAdCount:[],allStoriesTitle:!1,brandworksSlug:"",featuredTop:!0,bottomLine:!0,noAds:!1},w.propTypes={stories:i.a.arrayOf(i.a.shape({})),allRendered:i.a.bool,setAllLoadedState:i.a.func,modifier:i.a.string,mobileSeeMoreHidden:i.a.bool,advertorialSlugs:i.a.shape({}),authorPage:i.a.bool,author:i.a.shape({}),hasSlug:i.a.bool,disableMore:i.a.bool,titleOverride:i.a.string,paginationEnabled:i.a.bool,type:i.a.string,section:i.a.string,page:i.a.number,totalPages:i.a.number,isLastPage:i.a.bool,infiniteScrollLoading:i.a.bool,infiniteScrollEnabled:i.a.bool,infiniteScrollAllFeedFetch:i.a.func,hideRecircFeed:i.a.func,config:i.a.shape({}).isRequired,hrefOverride:i.a.string,mobileAdCount:i.a.arrayOf(i.a.number),allStoriesTitle:i.a.bool,brandworksSlug:i.a.string,featuredTop:i.a.bool,bottomLine:i.a.bool,noAds:i.a.bool},t.default=w}}]);
//# sourceMappingURL=components-all_feed-all_feed.5235405f30e714a9350d.js.map